<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Ser</title>

	<script src="/eel.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

	<link rel="stylesheet" href="css/con_ser.css">
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="shortcut icon" href="img/sensor-favicon.png" type="image/x-icon">

 <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=<ваш API-ключ>" type="text/javascript"></script>
	<style>
        html, body, #map {
            width: 100%; height: 100%; padding: 0; margin: 0;
        }
    </style>
    <style type="text/css">
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      

      /* Optional: Makes the sample page fill the window. */
      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
   
</head>
<body id="body">

<div id="mySidenav" class="sidenav">
	  <a href="weather.html"><img src="img/weather mini.png" style="width: 40px;"></a>

  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
  <a href="mainpage.html"><img src="img/home.png" style="width: 40px;"></a>

  <a href="https://t.me/rehtaeW_bot" target="_blank"><img src="img/iconfinder_social-56_1591869.png " style="width: 40px;"></a>
  <a href="currency.html"><img src="img/exchange mini.png" style="width: 45px;"></a>
  <a href="#"><img src="img/news mini.png" style="width: 45px;"></a>  

  
</div>


<span style="font-size:30px;cursor:pointer; float:left;" onclick="openNav()">&#9776;</span>
	<a href="#"><img src="img/lighton.png" style="width: 45px; margin-top: 5px;" onclick="myFunctiona()" id="light"></a>
	<a href="#"><img src="img/lightoff.png" style="width: 45px; display: none; margin-top: 5px;" onclick="myFunctionaz()" id="light2"></a>
<!-- 	<a href="weather.html"><img src="img/weather mini.png" style="width: 45px;"></a>
 -->
<!-- <a href="weather.html" style="position: absolute; top: 5px;">
	<img src="img/sensor.png"></a> -->
	<div id="butts">

		<button id="buut_conn" class="glow-on-hover" type="button" onclick="myFunction()">Get Sensor data</button>
	</div>
 <br><br>


	

	<div style=" display: flex;
  justify-content: center;">
		<span id="con" style="color: white; font-size: 30px;"></span><br>
		<div class="moduls" id="datas">
			<h3 style="text-align: center;"><img src="img/loc.png"> Vanadzor</h3>
			<span id="valll"><img src="img/bluetooth.png" style="width: 50px;"></span><br>
			<span id="valll1"></span>


		</div>
		<div class="moduls" id="datas1">
			<h3 style="text-align: center;">NONE</h3>
			<img src="img/gsm.png" style="width: 50px;">

		</div>
		<div class="moduls" id="datas2">
			<h3 style="text-align: center;">NONE</h3>
			<img src="img/wifi.png" style="width: 50px;">

		</div>
		

		
	</div>
	<div id="map"></div>




	<script type="text/javascript">
				ymaps.ready(sleep);

		function sleep(milliseconds) {
		  const date = Date.now();
		  let currentDate = null;
		  do {
			currentDate = Date.now();
		  } while (currentDate - date < milliseconds);
		}
		async function get_divice_date(bul) {
			var bulik = bul
			while (bulik){

				var res = await eel.get_divice_date()();
				document.getElementById('valll').innerHTML = res[0];
				document.getElementById('valll1').innerHTML = res[1];
				sleep(500);


			}
			    var erevan = res[1];
    var vanadzor = "155";
    var myMap = new ymaps.Map("map", {
            center: [40.327977243850356, 44.57353844620169],
            zoom: 8
        }, {
            searchControlProvider: 'yandex#search'
        }),

    // Создаем геообъект с типом геометрии "Точка".a
        myGeoObject = new ymaps.GeoObject({
            // Description Geometry.
            
        }, {
            // Properties
            // Иконка метки будет растягиваться под размер ее содержимого.
            preset: 'islands#blackStretchyIcon',
            // Метку можно перемещать.
            draggable: true
        }),
        myPieChart = new ymaps.Placemark([
            41.980735348915466, 43.97393445809855
        ], {
            // Diagram datas
            data: [
                {weight: 8, color: '#0E4779'},
                {weight: 6, color: '#1E98FF'},
                {weight: 4, color: '#82CDFF'}
            ],
            iconCaption: erevan
        }, {
            // Зададим произвольный макет метки.
            iconLayout: 'default#pieChart',
            // Радиус диаграммы в пикселях.
            iconPieChartRadius: 30,
            // Радиус центральной части макета.
            iconPieChartCoreRadius: 10,
            // Стиль заливки центральной части.
            iconPieChartCoreFillStyle: '#ffffff',
            // Cтиль линий-разделителей секторов и внешней обводки диаграммы.
            iconPieChartStrokeStyle: '#ffffff',
            // Ширина линий-разделителей секторов и внешней обводки диаграммы.
            iconPieChartStrokeWidth: 3,
            //Marker Max width 
            iconPieChartCaptionMaxWidth: 200
        });

    myMap.geoObjects
        .add(myGeoObject)
        .add(myPieChart)
    
      
        .add(new ymaps.Placemark([40.13773865755883, 44.44085340763167], {
            balloonContent: "Text",
            iconCaption: erevan
        }, {
            preset: 'islands#circleIcon',
            iconColor: '#3caa3c'
        }))
      
       
        .add(new ymaps.Placemark([40.864518476113695, 43.85308488002371], {
            balloonContent: 'eli text',
            iconCaption: 'TEXT'
        }, {
            preset: 'islands#greenDotIconWithCaption'
        }))
        .add(new ymaps.Placemark([40.81505486516969, 44.49222856532953], {
            balloonContent: 'Vanadzor Batumi Street',
            iconCaption: vanadzor
        }, {
            preset: 'islands#blueCircleDotIconWithCaption',
            iconCaptionMaxWidth: '50'
        }));
		}


		$('#buut_conn').on('click', function(){
			get_divice_date(true);
		});


	</script>
	<script>
		function myFunction() {
			sleep(500);
		  document.getElementById("con").innerHTML = "Connected";
		  
	
		}
</script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="/eel.js"></script>
<script>
function openNav() {
  document.getElementById("mySidenav").style.width = "90px";
}

function closeNav() {
  document.getElementById("mySidenav").style.width = "0";
}
</script>

<script>
function myFunctiona() {
  document.getElementById("datas").style.background =  "#303030";
  document.getElementById("datas1").style.background =  "#303030";
  document.getElementById("datas2").style.background =  "#303030";
  // document.getElementById("datas3").style.background =  "#303030";
  // document.getElementById("datas4").style.background =  "#303030";
  // document.getElementById("datas5").style.background =  "#303030";

  document.getElementById("body").style.background =  "#222222";
  document.getElementById("body").style.color =  "#FFFF";

var x = document.getElementById("light");
var y = document.getElementById("light2");
  if (x.style.display === "none") {
    x.style.display = "block";
    y.style.display = "none";
  } else {
    x.style.display = "none";
    y.style.display = "block";
  }
}


 // background-color: #303030;
 //    color: #FFFF;
</script>

<script>
function myFunctionaz() {
  document.getElementById("datas").style.background =  "#22dfe6";
  document.getElementById("datas1").style.background =  "#22dfe6";
  document.getElementById("datas2").style.background =  "#22dfe6";
  // document.getElementById("datas3").style.background =  "#d9cba5";
  // document.getElementById("datas4").style.background =  "#d9cba5";
  // document.getElementById("datas5").style.background =  "#d9cba5";

  document.getElementById("body").style.background =  "#dae8de";

var x = document.getElementById("light");
var y = document.getElementById("light2");
  if (x.style.display === "none") {
    x.style.display = "block";
    y.style.display = "none";
  } else {
    x.style.display = "none";
    y.style.display = "block";
  }
}


 // background-color: #303030;
 //    color: #FFFF;
</script>

<script>
	

</script>


</body>
</html>